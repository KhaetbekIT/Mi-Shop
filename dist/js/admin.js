(()=>{"use strict";let e="http://localhost:3001";(()=>{const t=document.querySelector("#category-name"),n=document.querySelector("#category-image"),a=document.querySelector("#category-add-btn"),r=document.querySelector("#category-container"),d={name:"",image:""},o=()=>{""===t.value.trim()||""===n.value.trim()?a.disabled=!0:a.disabled=!1},c=()=>{var t;(t="/catalog",t=e+t,fetch(t).then((e=>e.json()))).then((e=>{r.innerHTML="",e.map(((e,t)=>{const{id:n,name:a}=e;r.insertAdjacentHTML("beforeend",`\n                    <tr>\n                        <th scope="row">${t+1}</th>\n                        <td>${a}</td>\n                        <td class="text-end">\n                            <button type="button" class="btn btn-outline-danger btn-sm" data-category-id="${n}">\n                                удалить\n                            </button>\n                        </td>\n                    </tr>\n                `)}))}))};t.addEventListener("input",(()=>{d.name=t.value,o()})),n.addEventListener("input",(()=>{const e=n.files[0];if("image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type){const t=new FileReader;t.addEventListener("load",(()=>{d.image=t.result})),t.addEventListener("error",(()=>{d.image="",n.value=""})),t.readAsDataURL(e)}else n.value="";o()})),a.addEventListener("click",(()=>{var a,r;(a="/catalog",r={method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}},a=e+a,fetch(a,r).then((e=>e.json()))).then((e=>{n.value="",t.value="",c()}))})),r.addEventListener("click",(t=>{if("BUTTON"===t.target.tagName){(n=`/catalog/${t.target.dataset.categoryId}`,n=e+n,fetch(n,{method:"DELETE"}).then((e=>e.json()))).then((e=>{c()}))}var n})),c(),o()})()})();