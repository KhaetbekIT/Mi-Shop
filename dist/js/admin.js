(()=>{"use strict";let e="http://localhost:3001";(()=>{const t=document.querySelector("#category-name"),n=document.querySelector("#category-image"),a=document.querySelector("#category-add-btn"),r=document.querySelector("#category-container"),o={name:"",image:""},d=()=>{""===t.value.trim()||""===n.value.trim()?a.disabled=!0:a.disabled=!1},i=()=>{var t;(t="/catalog",t=e+t,fetch(t).then((e=>e.json()))).then((e=>{r.innerHTML="",e.map(((e,t)=>{const{id:n,name:a}=e;r.insertAdjacentHTML("beforeend",`\n                    <tr>\n                        <th scope="row">${t+1}</th>\n                        <td>${a}</td>\n                        <td class="text-end">\n                            <button type="button" class="btn btn-outline-danger btn-sm">\n                                удалить\n                            </button>\n                        </td>\n                    </tr>\n                `)}))}))};t.addEventListener("input",(()=>{o.name=t.value,d()})),n.addEventListener("input",(()=>{const e=n.files[0];if("image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type){const t=new FileReader;t.addEventListener("load",(()=>{o.image=t.result})),t.addEventListener("error",(()=>{o.image="",n.value=""})),t.readAsDataURL(e)}else n.value="";d()})),a.addEventListener("click",(()=>{var t,n;(t="/catalog",n={method:"POST",body:JSON.stringify(o),headers:{"Content-Type":"application/json"}},t=e+t,fetch(t,n).then((e=>e.json()))).then((e=>{i()}))})),i(),d()})()})();