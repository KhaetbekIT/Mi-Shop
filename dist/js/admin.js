(()=>{"use strict";let e="http://localhost:3001";(()=>{const t=document.querySelector("#category-name"),n=document.querySelector("#category-image"),a=document.querySelector("#category-add-btn"),o=document.querySelector("#category-container"),r=document.querySelector("#product-category"),d={name:"",image:""},c=()=>{""===t.value.trim()||""===n.value.trim()?a.disabled=!0:a.disabled=!1},i=()=>{var t;(t="/catalog",t=e+t,fetch(t).then((e=>e.json()))).then((e=>{o.innerHTML="",e.map(((e,t)=>{const{id:n,name:a}=e;o.insertAdjacentHTML("beforeend",`\n                    <tr>\n                        <th scope="row">${t+1}</th>\n                        <td>${a}</td>\n                        <td class="text-end">\n                            <button type="button" class="btn btn-outline-danger btn-sm" data-category-id="${n}">\n                                удалить\n                            </button>\n                        </td>\n                    </tr>\n                `),r.insertAdjacentHTML("beforeend",`\n                    <option value="${n}">${a}</option>\n                `)}))}))};t.addEventListener("input",(()=>{d.name=t.value,c()})),n.addEventListener("input",(()=>{const e=n.files[0];if("image/jpeg"===e.type||"image/jpg"===e.type||"image/png"===e.type){const t=new FileReader;t.addEventListener("load",(()=>{d.image=t.result})),t.addEventListener("error",(()=>{d.image="",n.value=""})),t.readAsDataURL(e)}else n.value="";c()})),a.addEventListener("click",(()=>{var a,o;(a="/catalog",o={method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}},a=e+a,fetch(a,o).then((e=>e.json()))).then((e=>{n.value="",t.value="",i()}))})),o.addEventListener("click",(t=>{if("BUTTON"===t.target.tagName){(n=`/catalog/${t.target.dataset.categoryId}`,n=e+n,fetch(n,{method:"DELETE"}).then((e=>e.json()))).then((e=>{i()}))}var n})),i(),c()})()})();