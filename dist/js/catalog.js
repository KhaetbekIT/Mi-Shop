(()=>{var t={33:(t,e,n)=>{"use strict";n.d(e,{iD:()=>s,om:()=>c});let o="http://localhost:3001";const c=t=>(t=o+t,fetch(t).then((t=>t.json()))),s=(t,e)=>(t=o+t,fetch(t,e).then((t=>t.json())))},942:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BusketFunc:()=>c});var o=n(33);const c=()=>{const t=document.querySelector("#cart-container");(0,o.om)("/cart").then((e=>{t.innerHTML="",e.map((e=>{const{id:n,name:o,price:c,count:s}=e;t.insertAdjacentHTML("beforeend",`\n                <div class="row border-bottom pb-3 pt-3">\n                    <div class="col col-12 col-md-6 mb-3 mb-md-0 fs-4">\n                        ${o}\n                    </div>\n                    <div\n                        class="col col-12 col-md-6 fs-4 d-flex align-items-center justify-content-end flex-wrap">\n                        <h4 class="me-3 d-flex align-itemns-center">${c} ₽</h4>\n                        <button type="button" class="btn btn-outline-dark btn-sm cart-item-controls"\n                            id="control-dec">\n                            -\n                        </button>\n                        <h6 class="cart-item-count me-3 ms-3"> ${s} </h6>\n                        <button type="button" class="btn btn-outline-dark btn-sm cart-item-controls"\n                            id="control-inc">\n                            +\n                        </button>\n                    </div>\n                </div>\n            `)}))}))}},432:(t,e,n)=>{"use strict";n.r(e),n.d(e,{CartFunc:()=>s});var o=n(33),c=n(942);const s=()=>{const t=document.querySelector("#products-container");t.addEventListener("click",(t=>{if(t.target.closest("button")){const e=t.target.closest("button").dataset.productId;(0,o.om)(`/products/${e}`).then((t=>{const{productName:e,price:n}=t;(0,o.iD)("/cart",{method:"POST",body:JSON.stringify({name:e,price:n,count:1}),headers:{"Content-Type":"application/json"}}).then((()=>{(0,c.BusketFunc)()}))}))}})),(()=>{const e=window.location.search,n=new URLSearchParams(e).get("id"),c=n?`/products?category=${n}`:"/products";(0,o.om)(c).then((e=>{e.map((e=>{const{id:n,title:o,productName:c,price:s,image:r}=e;t.insertAdjacentHTML("beforeend",`\n                    <div class="col col-12 col-sm-6 col-lg-4 col-xl-3 mb-3">\n                        <a href="#!" class="card-link">\n                            <div class="card">\n    \n                                <img src="${r}" class="card-img-top" alt="${o}" title="${o}">\n    \n                                <div class="card-body">\n                                    <span class="mb-2 d-block text-secondary">${c}</span>\n                                    <h6 class="card-title mb-3">${o}</h6>\n    \n                                    <div class="row">\n                                        <div class="col d-flex align-itemns-center justify-content-between">\n                                            <h4>${s} ₽</h4>\n                                            <button type="button" class="btn btn-outline-dark" data-product-id="${n}">\n    \n                                                <img src="./images/icon/shopping-cart-big.svg" alt="login">\n    \n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </a>\n                    </div>\n                `)}))}))})()}},83:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ScriptFunc:()=>a});var o=n(33);const c=t=>{t.classList.add("d-block"),document.body.insertAdjacentHTML("beforeend",'\n        <div id="layout" class="modal-backdrop fade"></div>\n    '),setTimeout((()=>{document.querySelector("#layout").classList.add("show"),t.classList.add("show")}),500)},s=t=>{t.classList.remove("show"),setTimeout((()=>{const e=document.querySelector("#layout");e&&e.remove(),t.classList.remove("d-block")}),500)},r=(t,e,n,o)=>{e.classList.remove("d-none"),n.classList.remove("d-none"),o.classList.add("d-none"),s(t)},a=()=>{const t=document.querySelector("#open-auth-btn"),e=document.querySelector("#auth-modal"),n=document.querySelectorAll("#modal-window-close"),a=e.querySelector("#login"),d=document.querySelector("#open-cart-btn"),l=document.querySelector("#logout-btn"),i=document.querySelector("#cart-modal"),u=document.querySelector("#login-control"),m=document.querySelector("#password-control");var p,v;s(t),t.addEventListener("click",(()=>{c(e)})),n.forEach(((t,n)=>{t.addEventListener("click",(()=>{s(e)})),t.addEventListener("click",(()=>{s(i)}))})),a.addEventListener("click",(()=>{r(e,d,l,t)})),l.addEventListener("click",(()=>{d.classList.add("d-none"),l.classList.add("d-none"),t.classList.remove("d-none")})),d.addEventListener("click",(()=>{c(i)})),p=u,v=m,a.addEventListener("click",(()=>{const t={lognUser:p.value,passUser:v.value};(0,o.om)("/profile").then((e=>{e.login===t.lognUser&&e.password===t.passUser&&localStorage.setItem("auth",JSON.stringify(t))}))})),l.addEventListener("click",(()=>{var e,n;e=l,n=t,d.classList.add("d-none"),e.classList.add("d-none"),n.classList.remove("d-none")})),((t,e,n,c)=>{let s=JSON.parse(localStorage.getItem("auth"));s&&(0,o.om)("/profile").then((o=>{o.login===s.lognUser&&o.password===s.passUser&&r(t,e,n,c)}))})(e,d,l,t),l.addEventListener("click",(()=>{localStorage.removeItem("auth")}))}}},e={};function n(o){var c=e[o];if(void 0!==c)return c.exports;var s=e[o]={exports:{}};return t[o](s,s.exports,n),s.exports}n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{const{BusketFunc:t}=n(942),{CartFunc:e}=n(432),{ScriptFunc:o}=n(83);o(),e(),t()})()})();